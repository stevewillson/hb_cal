<%
// get the return value for the 'getEvents' section

// get only the events for the organization selected

// find out which org is selected
//getOrgEvents().then()

let list = ''
for (let i = 0; i < events.length; i++) {
  const eventCategory = events[i].category
  const eventStartDate = events[i].dtstart
  const eventEndDate = events[i].dtend
  const startDate = DateTime.fromISO(eventStartDate, { zone: 'utc' }).toFormat('yyyy-MM-dd')
  const endDate = DateTime.fromISO(eventEndDate, { zone: 'utc' }).toFormat('yyyy-MM-dd')

  const eventSummary = events[i].summary
  //const eventImportType = events[i].eventImportType
  const eventImportType = 'test'
  const eventId = events[i]._id

  // create an entry for the event with a link to delete the event
  list += '<div class="' + eventImportType + '" >Category: ' + eventCategory + ', Event: ' + eventSummary
  list += '<br>Start: ' + startDate + ', End: ' + endDate +  '<form style="display: inline;" >\n'
  list += '<input type="button" class="linkButton" onclick="retrieveUpdateCalEvent(\'' + eventId + '\')" value="Edit" style="display: inline;" \\>'
  list += '<input type="button" class="linkButton" onclick="deleteCalEvent(\'' + eventId + '\')" value="Del" style="display: inline;" \\></form></div>\n'
}
%>

<h1>Event List</h1>
<%- list %>
